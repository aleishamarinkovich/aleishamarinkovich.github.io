<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
</head>
<body>
<div class="w-full sm:w-1/3 m-[8]">
    <p id="name">Aleisha Marinkovich</p>
    <a href="mailto:marinkovicha@gmail.com" id="email" >marinkovicha@gmail.com</a> <!-- todo can we make this an a href to mailto: -->
    <br/>
    <br />
    <p id="blurb">Aleisha is a graphic designer and book builder of Pākehā (New Zealand European) and Croatian descent. (New Zealand European) and Croatian descent. Working across design, research, and occasionally writing, she is driven by a love of stories, community and archives.</p>
    <br />
    <p id="portfolio">Portfolio available upon request.</p>
</div>
</body>
<script>
    // Variables
    const colours = {
        [0]: "text-[#000000]",
        [1]: "text-[#9933ff]",
        [2]: "text-[#993300]",
        [3]: "text-[#009999]",
        [4]: "text-[#005500]",
        [5]: "text-[#ff6600]",
        [6]: "text-[#ff99000]",
        [7]: "text-[#808080]",
        [8]: "text-[#ffff4f]",
        [9]: "text-[#4fffff]",
        [10]: "text-[#ff4fff]",
        [11]: "text-[#4f4fff]",
        [12]: "text-[#4fff4f]",
        [13]: "text-[#ff4f4f]",
        [14]: "text-[#4f80ff]",
        [15]: "text-[#bbbbbb]",
        [16]: "text-[#660066]",
        [17]: "text-[#996600]",
        [18]: "text-[#99cc00]",
        [19]: "text-[#990033]",
        [20]: "text-[#ff9999]",
        [21]: "text-[#666600]",
        [22]: "text-[#990000]",
        [23]: "text-[#9999ff]",
        [24]: "text-[#ff99cc]",
        [25]: "text-[#000088]",
    }
    const baseTextClass = `font-[Arial]`
    const baseLinkClass = `font-[Arial] text-decoration-line: underline;`

    // Setup
    const elements = {}
    let paragraphs = document.getElementsByTagName("p");
    for (let i = 0; i < paragraphs.length; i++){
        const paragraph = paragraphs[i]
        const tempElements = []
        const ids = []

        let counter = 0
        paragraph.innerText.split('').forEach(element => {
            tempElements.push(`<span class="${baseTextClass} currentColor-0" id="${paragraph.id}-${counter}">${element}</span>`)
            ids.push(`${paragraph.id}-${counter}`)
            counter++
        })
        paragraph.innerHTML = tempElements.join('')

        elements[paragraph.id] = ids
    }

    let links = document.getElementsByTagName("a");
    for (let i = 0; i < links.length; i++){
        const link = links[i]
        const tempElements = []
        const ids = []

        let counter = 0
        link.innerText.split('').forEach(element => {
            tempElements.push(`<span class="${baseLinkClass} currentColor-0" id="${link.id}-${counter}">${element}</span>`)
            ids.push(`${link.id}-${counter}`)
            counter++
        })
        link.innerHTML = tempElements.join('')

        elements[link.id] = ids
    }

    console.log(elements)


    function setupColours(elements) {
        let currentColor = 0
        for (const element of elements){
            const spanElement = document.getElementById(element)
            spanElement.className = `${baseTextClass} ${colours[currentColor]} currentColor-${currentColor}`
            if (currentColor === Object.values(colours).length -1 ){
                currentColor = 0
            } else {
                currentColor++
            }
        }
        setTimeout(function(){
            rotateColours(elements)
        }, 150)
    }

    async function rotateColours(spanElements) {
        for (let i = 0; i < spanElements.length; i++) {
            const spanElement = document.getElementById(spanElements[i]);
            const currentColor = parseInt(spanElement.className.split("currentColor-")[1]);

            let newColour = "";
            if (currentColor === Object.values(colours).length - 1) {
                newColour = `${colours[0]} currentColor-0`;
            } else {
                newColour = `${colours[currentColor + 1]} currentColor-${currentColor + 1}`;
            }

            spanElement.className = `${baseTextClass} ${newColour}`;

            await new Promise(resolve => setTimeout(resolve, 50));
        }

        setTimeout(function () {
            rotateColours(spanElements);
        }, 150);
    }


    const timer = ms => new Promise(res => setTimeout(res, ms))
    // Wait 10s for
    setTimeout(async function () {
        for (const element of Object.values(elements)) {
            setupColours(element)
        }
    }, 3000)
</script>
</html>