<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link href="./assets/css/tailwind.css" rel="stylesheet">
</head>
<body>
<div class="w-full sm:w-1/3 m-[8]">
    <p id="name">Aleisha Marinkovich</p>
    <a class="text-[#676767] underline" href="mailto:marinkovicha@gmail.com" id="email" >marinkovicha@gmail.com</a>
    <br />
    <br />
    <p id="blurb">Aleisha is a graphic designer and book builder of Pākehā (New Zealand European) and Croatian descent. (New Zealand European) and Croatian descent. Working across design, research, and occasionally writing, she is driven by a love of stories, community and archives.</p>
    <br />
    <p id="portfolio">Portfolio available upon request.</p>
</div>
</body>
<script>
    const colours = {
        [0]: "text-[#000000]/75",
        [1]: "text-[#9933ff]/75",
        [2]: "text-[#993300]/75",
        [3]: "text-[#009999]/75",
        [4]: "text-[#005500]/75",
        [5]: "text-[#ff6600]/75",
        [6]: "text-[#ff99000]/75",
        [7]: "text-[#808080]/75",
        [8]: "text-[#ffff4f]/75",
        [9]: "text-[#4fffff]/75",
        [10]: "text-[#ff4fff]/75",
        [11]: "text-[#4f4fff]/75",
        [12]: "text-[#4fff4f]/75",
        [13]: "text-[#ff4f4f]/75",
        [14]: "text-[#4f80ff]/75",
        [15]: "text-[#bbbbbb]/75",
        [16]: "text-[#660066]/75",
        [17]: "text-[#996600]/75",
        [18]: "text-[#99cc00]/75",
        [19]: "text-[#990033]/75",
        [20]: "text-[#ff9999]/75",
        [21]: "text-[#666600]/75",
        [22]: "text-[#990000]/75",
        [23]: "text-[#9999ff]/75",
        [24]: "text-[#ff99cc]/75",
        [25]: "text-[#000088]/75",
    }
    const baseTextClass = `default-txt-black font-[Soehne]`
    const baseLinkClass = `default-txt[#676767] underline font-[Soehne]`
    const colorIndices = Object.keys(colours).map(Number);

    const elements = {}
    let paragraphs = document.getElementsByTagName("p");
    for (let i = 0; i < paragraphs.length; i++){
        const paragraph = paragraphs[i]
        const tempElements = []
        const ids = []

        let counter = 0
        paragraph.innerText.split('').forEach(element => {
            const shuffled = colorIndices.sort(() => Math.random() - 0.5).slice(0, 4);
            tempElements.push(`<span class="${baseTextClass} currentColor-none allowedColors=${shuffled.join("-")}" id="${paragraph.id}-${counter}">${element}</span>`)
            ids.push(`${paragraph.id}-${counter}`)
            counter++
        })
        paragraph.innerHTML = tempElements.join('')

        elements[paragraph.id] = ids
    }

    let links = document.getElementsByTagName("a");
    for (let i = 0; i < links.length; i++){
        const link = links[i]
        const tempElements = []
        const ids = []

        let counter = 0
        link.innerText.split('').forEach(element => {
            const shuffled = colorIndices.sort(() => Math.random() - 0.5).slice(0, 4);
            tempElements.push(`<span class="${baseLinkClass} currentColor-none allowedColors=${shuffled.join("-")}" id="${link.id}-${counter}">${element}</span>`)
            ids.push(`${link.id}-${counter}`)
            counter++
        })
        link.innerHTML = tempElements.join('')

        elements[link.id] = ids
    }

    let colorful = false
    function toggleColor() {
        colorful = !colorful;
        setTimeout(toggleColor, colorful ? 5000 : 10000);
    }

    async function rotateColours(spanElements) {
        for (let i = 0; i < spanElements.length; i++) {
            const spanElement = document.getElementById(spanElements[i]);
            const allowedColours = spanElement.className.split("allowedColors=")[1].split(" ")[0].trim().split("-");
            const currentColour = spanElement.className.split("currentColor-")[1].split(" ")[0]

            if (currentColour !== "none") {
                const currentAllowedIndex = allowedColours.indexOf(currentColour);
                let nextColour

                if (currentAllowedIndex === 3) {
                    nextColour = allowedColours[0];
                } else {
                    nextColour = allowedColours[currentAllowedIndex + 1];
                }

                spanElement.className = `${spanElement.className.split("]")[0]}] currentColor-${nextColour} allowedColors=${allowedColours.join("-")} ${colours[nextColour]}`
            } else {
                const nextColour = allowedColours[0]
                spanElement.className = `${spanElement.className.split("]")[0]}] currentColor-${nextColour} allowedColors=${allowedColours.join("-")} ${colours[nextColour]}`
            }
        }

        setTimeout(function () {
            if (colorful) {
                rotateColours(spanElements);
            } else {
                restoreToBlack(spanElements)
            }
        }, 150);
    }

    async function restoreToBlack(spanElements){
        for (let i = 0; i < spanElements.length; i++) {
            const spanElement = document.getElementById(spanElements[i]);
            const defaultColour = spanElement.className.split(" ")[0].replace("default-", "").replace("txt", "text");
            spanElement.className = `${spanElement.className.split("text-[")[0]}${defaultColour}`
        }

        const interval = setInterval(function () {
            if (colorful) {
                rotateColours(spanElements);
                clearInterval(interval);
            }
        }, 150);
    }

    setTimeout(async function () {
        toggleColor()
        for (const element of Object.values(elements)) {
            rotateColours(element)
        }
    }, 10000)
</script>
</html>